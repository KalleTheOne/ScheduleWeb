<!DOCTYPE html>
<head>
    <title>Kalle äger</title>
</head>
<body>
    <h1>WOWOWOWOWOWOOW</h1>
    <canvas id="schema" width="711px" height="550px" style="border:1px solid #000000;"></canvas>
    <input id="groupinp"/><button>Skicka</button>

    <script>
        var xhr = new XMLHttpRequest();
        var url = "https://web.skola24.se/timetable/timetable-viewer/data/render"
        xhr.open("POST", url, false);
        xhr.setRequestHeader("Content-type", "application/json");

        var data = JSON.stringify({"divWidth":711,"divHeight":550,"headerEnabled":false,"selectedPeriod":null,"selectedWeek":9,"selectedTeacher":null,"selectedGroup":null,"selectedClass":null,"selectedRoom":null,"selectedStudent":null,"selectedCourse":null,"selectedSubject":null,"selectedSchool":{"name":"Hulebäcksgymnasiet","guid":"219254f7-917c-472e-ac23-6982156c6164","settings":{"activateViewer":true}},"selectedSignatures":{"signature":"na17a"},"domain":"harryda.skola24.se"});
        xhr.send(data);
        var json = JSON.parse(xhr.responseText);
        var stringJSON = JSON.stringify(json)
        console.log(json);


var imgData = json
var c = document.getElementById("schema");
var ctx = c.getContext("2d");

for (var i = 0; i < imgData.data.boxList.length; i += 1) {
    var x, y, width, height, fcolor, bcolor;

    x = imgData.data.boxList[i].x;
    y = imgData.data.boxList[i].y;
    width = imgData.data.boxList[i].width;
    height = imgData.data.boxList[i].height;
    fcolor = imgData.data.boxList[i].fcolor;
    bcolor = imgData.data.boxList[i].bcolor;

    ctx.fillStyle = fcolor;
    ctx.fillStyle = bcolor;
    ctx.fillRect(x, y, width, height);
}

// Om i är mindre än antalet datainlägg, i adderas då med 1 och koden utförs
for (var i = 0; i < imgData.data.textList.length; i += 1) {
    //Förklara variablar med bild egenskaper
    var x, y, width, height, text, fontsize, fcolor;

    //Sparar data i variablarna
    x = imgData.data.textList[i].x;
    y = imgData.data.textList[i].y;
    width = imgData.data.textList[i].width;
    height = imgData.data.textList[i].height;
    text = imgData.data.textList[i].text;
    fontsize = imgData.data.textList[i].fontsize;
    fcolor = imgData.data.textList[i].fcolor;

    //Kod som genererar schema
    ctx.font = fontsize + "px Times new roman";
    ctx.fillStyle = fcolor;
    ctx.fillText(text, x ,y);
}
    </script>
</body>
</html>